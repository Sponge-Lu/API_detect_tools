## 问题定位
- 当前主题逻辑在 `useTheme` 中完成，首次读取存储值并应用到 DOM：`src/renderer/hooks/useTheme.ts:14-17, 51-55`
- 本地存储键为 `app-theme-mode`，切换时会写入：`src/renderer/hooks/useTheme.ts:10, 46-49`
- 跟随系统通过 `matchMedia('prefers-color-scheme: dark')` 检测与监听：`src/renderer/hooks/useTheme.ts:20-25, 57-76`
- Tailwind 已使用 `darkMode: 'class'`：`tailwind.config.cjs:6`
- `App` 在挂载时调用 `useTheme()` 做初始化：`src/renderer/App.tsx:80-83`

结论：逻辑基本正确，但没有“启动前”就设置 `.dark` 类，导致初次加载阶段以系统偏好渲染，表现为“每次启动都跟随系统”。

## 修改方案
1. 在入口 HTML 里加入轻量的主题预置脚本（首屏前执行）
   - 文件：`src/renderer/index.html`
   - 逻辑：启动前从 `localStorage('app-theme-mode')` 读取；
     - 如果是 `light`，移除 `document.documentElement` 的 `dark` 类；
     - 如果是 `dark`，添加 `dark` 类；
     - 如果是 `system` 或无值，按 `matchMedia('(prefers-color-scheme: dark)')` 结果设置。
   - 作用：确保 CSS 在加载/首帧时就使用上次的设置，避免跟随系统和闪烁。

2. 强化 `useTheme` 的健壮性（无破坏性微调）
   - 对读取值做白名单校验（`light|dark|system`），非法值回退 `system`：`src/renderer/hooks/useTheme.ts:14-17`
   - 保持现有监听与持久化逻辑不变。

3. 可选优化（后续）：统一主题状态来源
   - 用 `React Context` 包一层 `ThemeProvider`，避免多个组件独立调用 `useTheme()` 造成重复副作用；现阶段不影响修复结果。

## 验证步骤
- 在设置面板将主题切为“浅色”，确认 `localStorage('app-theme-mode') === 'light'`。
- 重启应用（或刷新），观察首屏与整局渲染保持浅色，不受系统切换影响。
- 切到“跟随系统”，再切换系统深/浅色，界面应实时跟随，且再次重启后仍按 `system` 行为。

## 变更范围
- 仅修改 `src/renderer/index.html`（新增内联脚本）与 `src/renderer/hooks/useTheme.ts`（微调读取校验），不引入第三方库，不改动样式体系。