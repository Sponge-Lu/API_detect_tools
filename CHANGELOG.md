# 更新日志

所有对本项目的显著变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)，并且本项目遵循 [Semantic Versioning](https://semver.org/spec/v2.0.0.html)。

## [v2.1.1]

### 新增
- **模型列表分页显示**：默认只显示前 50 个模型，点击"显示全部"加载更多，大幅提升展开全部站点时的渲染性能。
- **批量检测实时刷新**：并发检测时单站完成即刻更新 UI，不再等待全部结束。
- **UI优化**：表头使用和站点卡片一致的渐变色；用户分组图标改为按顺序显示的圆框数字（①②③...）。
- **登录提示与等待**：批量检测遇到未登录站点时，自动打开浏览器并弹窗提示用户登录，登录后可继续检测。
- **证书错误提示**：模型/余额接口遇到证书过期或不受信任（如 “Certificate has expired”）时，直接提示原因，避免长时间超时。
- **模型全局搜索栏**：全局搜索模型，隐藏没有该模型的站点。
- **UI调整**：站点一级卡片增加渐变色，在展开二级面板后更显眼；白天模式的签到标签文字对比度增加；夜晚模式下，最大并发数可以看到了。
- **全部站点展开/收起**：可以对所有站点卡片同时展开与收起，避免一个一个手动点击。
- **签到按钮自动恢复**：第二天签到按钮自动恢复成”签到“样式。

### 默认调整
- 超时默认 30 秒。
- 并发默认开启，最大并发默认 3（可在设置中调节 1–5）。

### 其他
- 调试端口随机化，减少固定端口被拦截/误报的概率。
- 取消隐藏/后台启动 Chrome，降低被杀软误报概率。

---

## [2.1.0] - 2025-12-02

### 新增
- **架构重构**：全面迁移至 Zustand 状态管理，降低组件耦合度，提升应用响应速度。
- **模块化服务**：拆分 IPC 处理器为独立的模块（config, theme, backup, token, detection），主进程逻辑更清晰。
- **自动备份系统**：配置文件和令牌数据自动备份到 `~/.api-hub-management-tools/`，并提供 GUI 界面支持从任意历史备份恢复。
- **备份恢复体验**：从备份恢复配置后立即加载数据，无需重启应用。
- **更新时间显示**：优化站点更新时间的显示逻辑，使用更人性化的格式（如“x天前”）。
- **配置导入导出**：支持 JSON 格式的完整配置导入导出，便于数据迁移。
- **Toast 通知**：引入全局 Toast 通知系统，提供更友好的操作反馈。
- **加载骨架屏**：在数据加载时显示骨架屏，提升视觉体验。

### 优化
- **性能提升**：引入 `RequestManager` 实现 API 请求去重与缓存，减少不必要的网络请求。
- **构建体积**：优化 Vite 配置与代码分割，显著减小应用体积。
- **错误处理**：统一了全链路的错误捕获与提示机制，确保异常情况有明确反馈。
- **代码规范**：落地 ESLint + Prettier + Husky 工作流，统一代码风格。
- **类型安全**：引入 Zod 进行运行时输入验证，强化 TypeScript 类型定义。

### 修复
- 修复了主进程中重复注册 IPC 处理器的问题。
- 修复了部分 API 请求头重复定义的问题。
- 移除了大量废弃的旧代码（如 ConfigManager, TokenStorage），精简代码库。

---

## [2.0.6] - [2.0.8]
- **忘记记录了**

---

## [2.0.5] - 2025-11-27

### 优化
- **智能添加站点**：简化添加流程，从 4 步减少为 2 步。点击“获取信息”后自动处理浏览器登录与检测。
- **状态反馈**：添加站点时实时显示操作状态（启动浏览器、等待 Cloudflare、等待登录等）。
- **登录检测**：增强了 Session 过期检测和页面导航重试机制。
- **界面布局**：优化站点编辑卡片，采用更紧凑的布局，提升信息密度。
- **签到体验**：签到失败后支持直接跳转到签到页面；优化了相关提示文案。

---

## [2.0.4] - 2025-11-26

### 新增
- **自定义弹窗**：使用美观的自定义弹窗替代系统原生 alert/confirm。
- **分组排序**：支持通过拖拽调整站点分组的顺序。
- **主题持久化**：修复了重启后主题设置丢失的问题，并解决了启动白屏闪烁。

### 优化
- **界面细节**：调整了字体大小和间距，提升整体可读性。
- **权限错误提示**：检测到 401/403 错误时，提供更明确的重新登录引导。
- **浏览器管理**：优化了会话清理逻辑，防止加载旧的历史页面。

---

## [2.0.3] - 2025-11-25

### 新增
- **站点分组管理**：支持创建、编辑、删除站点分组。
- **分组筛选**：支持按分组筛选站点列表。
- **拖拽分组**：支持将站点拖拽到分组标签进行快速分类。

### 修复
- 修复了配置文件加载时的部分逻辑错误。

---

## [2.0.2] - 2025-11-24

### 新增
- **API Key 管理增强**：支持在应用内直接删除 API Key，并兼容多种删除接口格式。
- **Cloudflare 兼容**：API Key 操作支持自动降级到浏览器模式，以绕过 Cloudflare 验证。

### 优化
- **刷新策略**：API Key 变更后仅刷新相关数据，不再强制全站刷新。

---

## [2.0.1] - 2025-11-20

### 新增
- **统计视图**：新增 Token 使用量（输入/输出/总量）、请求数、RPM/TPM 等统计指标。
- **列宽调整**：支持拖拽调整列表列宽，并自动保存偏好。
- **快捷操作**：在列表项中集成签到、复制、刷新等快捷按钮。

### 优化
- **信息展示**：优化了 API Key 和模型列表的展示布局，支持单行显示更多信息。
- **窗口适配**：调整默认窗口大小以适应新的宽布局。

---

## [2.0.0] - 2025-10-28

### 重大变更
- **浏览器启动重构**：使用 `spawn` 替代 `exec` 启动 Chrome，支持多路径自动检测，显著提升稳定性。
- **应用体积优化**：通过限制语言包、启用 ASAR 压缩和构建优化，体积减少约 60%。
- **生产环境修复**：修复了打包后出现的白屏问题。

### 新增
- **签到功能**：完整实现智能签到检测、一键签到及奖励显示。
- **加油站**：支持配置额外的福利链接。

---

## [1.x] - 历史版本

### 核心功能
- 支持 7 种主流 API 站点类型（New API, One API, Veloera 等）。
- 支持多账号管理、余额查看、模型列表。
- 支持 API Key 管理。
- 支持自动识别和手动添加站点。
